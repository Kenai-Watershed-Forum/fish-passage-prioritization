[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Kenai Peninsula Borough Fish Passage Prioritization Data Synthesis [DRAFT]",
    "section": "",
    "text": "Introduction\n\n\n\n\n\nCulvert installed near Tyonek, Alaska in 2024. Left: before replacement, Right: after replacement. (Photo Credit: USFWS & NCRS)\n\n\n\n\n\nFish passage structures, including stream crossing structures like culverts and bridges, serve as critical infrastructure to accommodate floodplain function and aquatic organism movement where rivers intersect with roads, trails, and utility corridors. Historic fish passage structures are frequently compromised or under-designed, threatening both infrastructure and wildlife habitat.\nPrioritizing when and where limited rehabilitation funds for fish passage should be directed can be complex. To assist in this task, databases of fish passage structures have been developed through both fieldwork and GIS mapping exercises. Ecological and physical information such as culvert condition, quantity of upstream habitat, and others can help managers make informed decisions on how to best use funds to maximize benefits for people and wildlife.\nIn Alaska, multiple, non-integrated fish passage databases exist from various agencies, complicating prospect of using all best available information to regionally prioritize rehabilitation funds.\nIn 2024, Kenai Watershed Forum collaborated with River Focus to draft a method to integrate fish passage assessment data from multiple sources for the Kenai Peninsula Borough (KPB) region of southcentral Alaska.\nWe identified 412 documented structures where roads or trails intersect with documented anadromous streams within the Kenai Peninsula Borough. We then applied this synthesized dataset to develop scores on the relative value of improvement (for both infrastructure and stream freshwater habitat) that would be achieved by improving or upgrading individual sites.\nOur method employs a coded script-based approach to integrating various datasets, greatly simplifying the ease of annually updating results presented here. It is the first known attempt in the Kenai Peninsula Borough region to integrate and apply fish passage data inventories from multiple agencies.\nA multitude of additional factors beyond those described here should be considered when prioritizing fish passage rehabilitation, including community support, funding opportunities, and construction logistics. The intent of this work is to provide systematic perspective on the habitat and infrastructure values of improving individual fish passage sites.\nAs of 2024-12-30 our results constitute a draft in progress and proof of concept, and should not yet be considered authoritative. Additional fieldwork and analysis efforts are needed to ensure complete information. See final chapter, Summary, chapter for details.",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "methods.html",
    "href": "methods.html",
    "title": "1  Methods",
    "section": "",
    "text": "1.1 Load and Integrate Datasets\nMethods described within this document are primarily for purposes of sharing example code to synthesize multiple fish passage datasets. A more detailed report with an expanded methods section is available for download at the link below.\nWe used the following datasets on Kenai Peninsula Borough area stream crossings to create the combined dataset:\nAdditional datasets may be integrated by modifying the script below, displayed by clicking the “Code” button. All scripts are hosted in Kenai Watershed Forum’s GitHub account.\nShow the code\n#| code-fold: true\n#| code-summary: \"Show the code\"\n\n### 1. Load Datasets ###\n# Load all data sets here\n# Can also use read_excel() to load .xlsx and .xls files\ndata_aquatic_barriers &lt;- read_csv(\"other/input/formatted_data/Aquaticbarriers/aquatic_barrier_ranks_aquaticbarriers_org.csv\", col_types = cols(.default = \"c\"))\ndata_ADFG &lt;- read_csv(\"other/input/formatted_data/ADFG/Kenai_culvert_prioritization_ADFG.csv\", col_types = cols(.default = \"c\")) \ndata_FWS_FBH22 &lt;- read_csv(\"other/input/formatted_data/USFWS/2022fishbarrierhunter.csv\", col_types = cols(.default = \"c\")) \ndata_FWS_FBH23 &lt;- read_csv(\"other/input/formatted_data/USFWS/2023fishbarrierhunter.csv\", col_types = cols(.default = \"c\")) \ndata_FWS_Kenai &lt;- read_csv(\"other/input/formatted_data/USFWS/Kenai USFWS Fish Passage_Projects_Needs_ 12_20_23.csv\", col_types = cols(.default = \"c\")) \n\n### 2. Format Labels ###\n# Create formatted labels to create links between subsets and master set\nlabels_aquatic_barriers &lt;- c(\"data source\", \"Latitude\", \"Longitude\", \"Name\", \"SARPID\", \"Source\", \"Snapped\", \"NHDPlusID\", \"StreamSizeClass\", \"LocalID\", \"CrossingCode\", \"NearestCrossingID\", \"Stream Name\", \"AnnualVelocity\", \"AnnualFlow\", \"TotDASqKm\", \"Road Name\", \"RoadType\", \"Structure Type\", \"Constriction_Ratio\", \"PotentialProject\", \"BarrierSeverity\", \"SARP_Score\", \"Recon\", \"Removed\", \"YearRemoved\", \"Condition\", \"PassageFacility\", \"TESpp\", \"StateSGCNSpp\", \"RegionalSGCNSpp\", \"Trout\", \"Landownership\", \"BarrierOwnerType\", \"ProtectedLand\", \"External Report Links\", \"EJTract\", \"EJTribal\", \"Basin\", \"Subbasin\", \"Subwatershed\", \"HUC2\", \"HUC6\", \"HUC8\", \"HUC10\", \"HUC12\", \"State\", \"County\", \"Excluded\", \"Invasive\", \"OnLoop\", \"HasNetwork\", \"Ranked\", \"Intermittent\", \"StreamOrder\", \"Landcover\", \"SizeClasses\", \"TotalUpstreamMiles\", \"PerennialUpstreamMiles\", \"Reported_Upstream_Fish_Habitat_miles\", \"AlteredUpstreamMiles\", \"UnalteredUpstreamMiles\", \"PerennialUnalteredUpstreamMiles\", \"TotalDownstreamMiles\", \"FreeDownstreamMiles\", \"FreePerennialDownstreamMiles\", \"FreeIntermittentDownstreamMiles\", \"FreeAlteredDownstreamMiles\", \"FreeUnalteredDownstreamMiles\", \"GainMiles\", \"PerennialGainMiles\", \"TotalNetworkMiles\", \"TotalPerennialNetworkMiles\", \"PercentUnaltered\", \"PercentPerennialUnaltered\", \"UpstreamDrainageArea\", \"UpstreamWaterfalls\", \"UpstreamDams\", \"UpstreamSmallBarriers\", \"UpstreamRoadCrossings\", \"UpstreamHeadwaters\", \"TotalUpstreamRoadCrossings\", \"TotalDownstreamWaterfalls\", \"TotalDownstreamDams\", \"TotalDownstreamSmallBarriers\", \"MilesToOutlet\", \"FlowsToOcean\", \"FlowsToGreatLakes\", \"ExitsRegion\") # nolint:\n\nlabels_ADFG &lt;- c(\"ADF&G Crossing Code\", \"ADF&G rating\", \"Sport Fish Area Boundary\", \"Area, Region, Quad or City\", \"Road Name\", \"Stream Name\", \"Prioritization\", \"AWCStreamNo\", \"Miles Used for Scoring\", \"MSB Culverts to 16pc Gradient with Green culverts removed \", \"Reported_Upstream_Fish_Habitat_miles\", \"Pre-2022 Miles Data to NEXT BARRIER or END\", \"AWC Miles U/S- \", \"Acres of Lake\", \"Fish_Species_Composition\", \"No of Anadromous Species\", \"Resident AFFI- Needs to be updated.\", \"No of resident species\", \"Red/Gray rating\", \"Rating w/ Perch\", \"Perch_Height\", \"Perch\", \"Latitude\", \"Longitude\", \"Additional Notes\") # nolint:\n\nlabels_FWS_FBH22 &lt;- c(\"x\", \"y\", \"ObjectID\", \"GlobalID\", \"CreationDate\", \"Creator\", \"EditDate\", \"Editor\", \"Date and Time Observed:\", \"Observer Name:\", \"Observer Phone:\", \"Number of Culverts at your Crossing Site:\", \"Culvert Material:\", \"Other - Culvert Material:\", \"Closest Town:\", \"Stream Name\", \"Enter more data?\", \"Tributary to:\", \"Subwatershed Name:\", \"Road Name\", \"Road Elevation:\", \"Road Surface:\", \"Landownership\", \"Culvert Condition:\", \"Structure Type\", \"Channel Wetted Width (feet):\", \"Upstream_OHWM_feet\", \"Upstream_Bankfull_Width_feet\", \"Road Fill Height Over Top of Culvert:\", \"Tidal Site\", \"Structure Wetted Width at Inlet (feet):\", \"Water Depth at Inlet (feet):\", \"Substrate width in Culvert:\", \"Percent of Inlet Blocked by Debris:\", \"Grate at Inlet:\", \"Visible Deformation\", \"Structure Wetted Width at Outlet (feet):\", \"Water Depth at Outlet (feet):\", \"Percent of Outlet Blocked by Debris:\", \"Grate at Outlet:\", \"Visible Deformation at Outlet:\", \"Perch_Height\", \"Outlet Scour Pool\", \"Would you like to add data for more culverts?\", \"Culvert or Bridge Cell 2 of:\", \"Cell 2 Structure Type:\", \"Cell 2 Inlet Structure Width:\", \"Cell 2 Inlet Structure Height above Water:\", \"Cell 2 Inlet Structure Wetted Width:\", \"Cell 2 Inlet Water Depth:\", \"Cell 2 Outlet Structure Width:\", \"Cell 2 Outlet Structure Height above Water:\", \"Cell 2 Outlet Wetted Width:\", \"Cell 2 Outlet Water Depth:\", \"Culvert or Bridge Cell 3 of:\", \"Cell 3 Structure Type:\", \"Cell 3 Inlet Structure Width:\", \"Cell 3 Inlet Structure Height above Water:\", \"Cell 3 Inlet Structure Wetted Width:\", \"Cell 3 Inlet Water Depth:\", \"Cell 3 Outlet Structure Width:\", \"Cell 3 Outlet Structure Height above Water:\", \"Cell 3 Outlet Wetted Width:\", \"Cell 3 Outlet Water Depth:\", \"Culvert or Bridge Cell 4 of:\", \"Cell 4 Structure Type:\", \"Cell 4 Inlet Structure Width:\", \"Cell 4 Inlet Structure Height above Water:\", \"Cell 4 Inlet Structure Wetted Width:\", \"Cell 4 Inlet Water Depth:\", \"Cell 4 Outlet Structure Width:\", \"Cell 4 Outlet Structure Height above Water:\", \"Cell 4 Outlet Wetted Width:\", \"Cell 4 Outlet Water Depth:\", \"Perched Culvert:\", \"Are you on private land?\", \"Please Fill Out Volunteer Form Below.\", \"Would you like to enter more data?\", \"Fish Species Present\", \"Length of Culvert (feet):\", \"Enter additional photos?\", \"Is there a hydraulic jump at the inlet?\", \"Fish Passage Barrier Severity\", \"Notes\", \"Is there a known site identification number for this crossing?\", \"Known Site ID (ADF&G No.)\", \"Additional Note for ADFG\", \"Longitude\", \"Latitude\") # nolint:\n\nlabels_FWS_FBH23 &lt;- c(\"x\", \"y\", \"ObjectID\", \"GlobalID\", \"CreationDa\", \"Creator\", \"EditDate\", \"Editor\", \"Date_and_T\", \"Observer_N\", \"Observer_P\", \"Number_of_\", \"Culvert_Ma\", \"Other___Cu\", \"Closest_To\", \"Stream Name\", \"Enter_more\", \"Tributary_\", \"Subwatersh\", \"Road Name\", \"Road_Eleva\", \"Road_Surfa\", \"Landownership\", \"Culvert_Co\", \"Structure Type\", \"Channel_We\", \"Upstream_OHWM_feet\", \"Upstream_Bankfull_Width_feet\", \"Road_Fill_\", \"Tidal Site\", \"Structure1\", \"Water_Dept\", \"Structur_1\", \"Water_De_1\", \"Substrate_\", \"Percent_of\", \"Grate_at_I\", \"Visible Deformation\", \"Structur_2\", \"Water_De_2\", \"Structur_3\", \"Water_De_3\", \"Percent__1\", \"Grate_at_O\", \"Visible__1\", \"Perch_Height\", \"Scour_Pool\", \"Would_you_\", \"Culvert_or\", \"Cell_2_Str\", \"Cell_2_Inl\", \"Cell_2_I_1\", \"Cell_2_I_2\", \"Cell_2_I_3\", \"Cell_2_Out\", \"Cell_2_O_1\", \"Cell_2_O_2\", \"Cell_2_O_3\", \"Culvert__1\", \"Cell_3_Str\", \"Cell_3_Inl\", \"Cell_3_I_1\", \"Cell_3_I_2\", \"Cell_3_I_3\", \"Cell_3_Out\", \"Cell_3_O_1\", \"Cell_3_O_2\", \"Cell_3_O_3\", \"Culvert__2\", \"Cell_4_Str\", \"Cell_4_Inl\", \"Cell_4_I_1\", \"Cell_4_I_2\", \"Cell_4_I_3\", \"Cell_4_Out\", \"Cell_4_O_1\", \"Cell_4_O_2\", \"Cell_4_O_3\", \"Perched_Cu\", \"Are_you_on\", \"Please_Fil\", \"Would_you1\", \"Fish_Speci\", \"Length_of_\", \"Enter_addi\", \"Length_of1\", \"Is_there_a\", \"Fish_Passa\", \"Notes\", \"Is_there_1\", \"Known_Site\", \"x_1\", \"y_1\", \"Additional\", \"Longitude\", \"Latitude\") # nolint:\n\nlabels_FWS_Kenai &lt;- c(\"area\", \"category\", \"Title \", \"Replacement Date\", \"Replacement Date Notes\", \"ADF&G Crossing Code\", \"KWF ID#\", \"Alt ID\", \"Landownership\", \"Funding \", \"Category\", \"Latitude\", \"Longitude\", \"Last Eval\", \"Reported_Upstream_Fish_Habitat_miles\", \"Reported_Upstream_Lake_Fish_Habitat_acres\", \"upstream habitat notes\", \"Salmon Species\", \"Issue\", \"Additional Notes\") \n\n\n### 3. Prepare Master Dataset ###\ntoday &lt;- format(Sys.Date(), \"%m%d%Y\") # MMDDYYYY format\n\n# Column Header Labels Defined Here, Items can be added, rearranged, or removed. # nolint:\nmaster_column_labels &lt;- c(\n  \"Latitude\", \"Longitude\", \"Priority_Total\", \"Priority_Ecological\", \"Priority_Physical\", \"KPB Crossing Code\", \"ADF&G Crossing Code\", \"Fish_Species_Composition\", # nolint:\n  \"ADF&G rating\", \"Stream Name\", \"Road Name\", \"Structure Type\", \"Structure Dimensions\", \"Structure_Slope\", \"Perch_Height\", # nolint:\n  \"Outlet Scour Pool\", \"Constriction_Ratio\", \"NHD+ Upstream Fish Habitat miles\", \"Reported_Upstream_Fish_Habitat_miles\", # nolint:\n  \"Reported_Upstream_Lake_Fish_Habitat_acres\", \"Upstream_OHWM_feet\", \"Upstream_Bankfull_Width_feet\", \"Road Material and Fill Height Over Top of Culvert\", # nolint:\n  \"Tidal Site\", \"Visible Deformation\", \"Landownership\", \"External Report Links\", \"Additional Notes\" # nolint:\n) \n\n\n### 4. Relabel sub-data column names to prepare for combining ###\n#  REMOVES any column that doesn't match the master column label list\ndata_aquatic_barriers &lt;- set_names(data_aquatic_barriers, labels_aquatic_barriers) %&gt;% select(any_of(master_column_labels)) # nolint:\ndata_ADFG &lt;- set_names(data_ADFG, labels_ADFG) %&gt;% select(any_of(master_column_labels)) # nolint:\ndata_FWS_FBH22 &lt;- set_names(data_FWS_FBH22, labels_FWS_FBH22) %&gt;% select(any_of(master_column_labels)) # nolint:\ndata_FWS_FBH23 &lt;- set_names(data_FWS_FBH23, labels_FWS_FBH23) %&gt;% select(any_of(master_column_labels)) # nolint:\ndata_FWS_Kenai &lt;- set_names(data_FWS_Kenai, labels_FWS_Kenai) %&gt;% select(any_of(master_column_labels)) # nolint:\n\n\n### 5. Correct errors in data set merging here to prep for bind_rows() ###\n# Note here the only error so far is duplicated lines in this one dataset\ndata_FWS_FBH23 &lt;- data_FWS_FBH23[, !duplicated(as.list(data_FWS_FBH23))] # nolint:\n\n\n### 6. Combine data sets ###\nmerged_data_set &lt;- bind_rows(data_aquatic_barriers, data_ADFG, data_FWS_FBH22, data_FWS_FBH23, data_FWS_Kenai) # nolint:\n\n# 6.b Identify missing columns that didn't have any data linkages\n# Creates blank columns for missing items and rearranges the columns into the master_column_labels order # nolint:\nmissing_cols &lt;- setdiff(master_column_labels, colnames(merged_data_set))\n\n\n### 7. Manipulate data as needed ###\nmerged_data_set &lt;- merged_data_set |&gt;\n  mutate(Latitude = as.numeric(Latitude)) |&gt;\n  mutate(Longitude = as.numeric(Longitude)) |&gt;\n  mutate(Reported_Upstream_Fish_Habitat_miles = as.numeric(Reported_Upstream_Fish_Habitat_miles)) |&gt; # nolint:\n  mutate(Upstream_OHWM_feet = as.numeric(Upstream_OHWM_feet)) |&gt;\n  mutate(Upstream_Bankfull_Width_feet = as.numeric(Upstream_Bankfull_Width_feet)) |&gt; # nolint:\n  mutate(Reported_Upstream_Lake_Fish_Habitat_acres = as.numeric(Reported_Upstream_Lake_Fish_Habitat_acres)) |&gt; # nolint:\n  add_column(!!!set_names(map(missing_cols, ~NA_real_), missing_cols)) |&gt; # Adds any columns that are missing from the master_column_labels # nolint:\n  select(all_of(master_column_labels)) # Sorts the columns to be in the same order as master_column_labels # nolint:\n\n# Correct text entries in Perch Height\nmerged_data_set &lt;- merged_data_set |&gt;\n  mutate(\n    Perch_Height = case_when(\n      Perch_Height == \"&gt;1_0'\" ~ \"1.5\",\n      Perch_Height == \"&lt;_5'\" ~ \"0.5\",\n      Perch_Height == \"0_5'_1_0'\" ~ \"1\",\n      TRUE ~ Perch_Height # Keep other values as they are\n    )\n  ) |&gt;\n  mutate(Perch_Height = as.numeric(Perch_Height))",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Methods</span>"
    ]
  },
  {
    "objectID": "methods.html#load-and-integrate-datasets",
    "href": "methods.html#load-and-integrate-datasets",
    "title": "1  Methods",
    "section": "",
    "text": "Fish Barrier Hunter 2022 (U.S. Fish & Wildlife Service)\nFish Barrier Hunter 2023 (U.S. Fish & Wildlife Service)\n2024 Anadromous Waters Catalog inventory (Alaska Department of Fish and Game)\nAquaticBarriers.org",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Methods</span>"
    ]
  },
  {
    "objectID": "methods.html#assign-priority-points-based-on-physical-attributes",
    "href": "methods.html#assign-priority-points-based-on-physical-attributes",
    "title": "1  Methods",
    "section": "1.2 Assign Priority Points based on Physical Attributes",
    "text": "1.2 Assign Priority Points based on Physical Attributes\nWe assigned ranking values on a scale of 1-10 for physical attributes associated with each site in the study area, which included:\n\nPerch height\nCrossing width to OHW (ordinary high water) ratio\nConstriction\nCrossing slope\n\n\n\nShow the code\n### 8. Assign Priority Points based on Physical Attributes ###\n# 8.a Perch Height (ft)\nfunction_perch_height_pts &lt;- function(value) {\n  case_when(\n    value == 0 ~ 0,\n    value &lt;= 0.25 ~ 2.5,\n    value &lt;= 0.75 ~ 5,\n    value &lt;= 1 ~ 7.5,\n    value &gt; 1 ~ 10,\n    TRUE ~ 0 # assigned to blank values\n  )\n}\n\n# 8.b Culvert Constriction\nfunction_constriction_pts &lt;- function(value) {\n  case_when(\n    value &gt; 1 ~ 0,\n    value &gt;= 0.8 ~ 2.5,\n    value &gt;= 0.6 ~ 5,\n    value &gt;= 0.4 ~ 7.5,\n    value &lt; 0.4 ~ 10,\n    TRUE ~ 0 # assigned to blank values\n  )\n}\n\n# 8.c Crossing Slope (%)\nfunction_crossing_slope_pts &lt;- function(value) {\n  case_when(\n    value &lt; 0.5 ~ 0,\n    value &lt;= 1.5 ~ 2,\n    value &lt;= 2.5 ~ 3,\n    value &lt;= 3.5 ~ 5,\n    value &lt;= 4.0 ~ 7,\n    value &gt; 4.0 ~ 10,\n    TRUE ~ 0 # assigned to blank values\n  )\n}",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Methods</span>"
    ]
  },
  {
    "objectID": "methods.html#assign-priority-points-based-on-ecological-attributes",
    "href": "methods.html#assign-priority-points-based-on-ecological-attributes",
    "title": "1  Methods",
    "section": "1.3 Assign Priority Points based on Ecological Attributes",
    "text": "1.3 Assign Priority Points based on Ecological Attributes\nWe assigned ranking values on a scale of 1-10 for ecological attributes associated with each site in the study area, which included:\n\nFish species composition\nLinear (stream) habitat quantity upstream\nArea (lake) habitat quantity upstream\n\nNote: the original analysis plan intended to use predicted (probable) upstream habitat quantity rather than solely known (documented) habitat quantity. The task was determined to beyond the scope of this project, but future analysis should incorporate this task. See the “Summary” chapter for details.\n\n\n\n\nShow the code\n### 9. Assign Priority Points based on Ecological Attributes ###\n# 9.a Presence of Anadromous Species vs. Resident (count)\nfunction_anadromous_pts &lt;- function(value) {\n  species_list &lt;- str_split(value, \",\",simplify=FALSE)\n  species_list &lt;- unlist(species_list)\n  \n  anadromous_species_list &lt;- c(\"CO\", \"COr\", \"COs\", \"COsr\", \"COp\", \"k\", \"Kr\", \"Ks\", \"Ksr\", \"Kp\", \"S\", \"Sr\", \"Ss\", \"Ssr\", \"Sp\", \"P\", \"Pr\", \"Ps\", \"Psr\", \"Pp\", \"CH\", \"CHr\", \"CHs\", \"CHsr\", \"CHp\", \"SH\", \"SHr\", \"SHs\", \"SHsr\", \"SHp\") # nolint:\n  resident_species_list &lt;- c(\"DV\", \"DVr\", \"DVs\", \"DVsr\", \"DVp\", \"W\", \"Wr\", \"Ws\", \"Wsr\", \"Wp\") # nolint:\n  \n  number_anadromous &lt;- sum(species_list %in% anadromous_species_list)\n  number_resident &lt;- sum(species_list %in% resident_species_list)\n  \n  if (length(species_list) == 0) {\n    return(0)\n  } else if (number_anadromous == 0 && number_resident == 0) {\n    return(0)\n  } else if (number_anadromous == 0 && number_resident &gt; 0) {\n    return(5)\n  } else if (number_anadromous == 1) {\n    return(8)\n  } else if (number_anadromous &gt; 1) {\n    return(10)\n  }\n}\n\n# 9.b Upstream Drainage Length (linear miles)\nfunction_upstream_length_pts &lt;- function(value) {\n  case_when(\n    value &lt; 0.1 ~ 0,\n    value &lt;= 0.25 ~ 2,\n    value &lt;= 0.5 ~ 4,\n    value &lt;= 1.0 ~ 6,\n    value &lt;= 1.5 ~ 8,\n    value &gt; 1.5 ~ 10,\n    TRUE ~ 0 # assigned to blank values\n  )\n}\n\n# 9.c Upstream Drainage Area (acres)\nfunction_upstream_area_pts &lt;- function(value) {\n  case_when(\n    value &lt; 1 ~ 0,\n    value &lt;= 5 ~ 2.5,\n    value &lt;= 10 ~ 5,\n    value &lt;= 15 ~ 7.5,\n    value &gt; 15 ~ 10,\n    TRUE ~ 0 # assigned to blank values\n  )\n}\n\n\n### 10. Calculate points and update priority field ###\n# Physical Priority\nmerged_data_set &lt;- merged_data_set |&gt;\n  rowwise() |&gt;\n  mutate(Priority_Physical = function_perch_height_pts(Perch_Height) + function_constriction_pts(Constriction_Ratio) + function_crossing_slope_pts(Structure_Slope)) |&gt; # nolint:\n  ungroup()\n\n# Ecological Priority\nmerged_data_set &lt;- merged_data_set |&gt;\n  rowwise() |&gt;\n  mutate(Priority_Ecological = function_anadromous_pts(Fish_Species_Composition) + function_upstream_length_pts(Reported_Upstream_Fish_Habitat_miles) + function_upstream_area_pts(Reported_Upstream_Lake_Fish_Habitat_acres)) |&gt; # nolint:\n  ungroup()\n\n# Total Priority\nmerged_data_set &lt;- merged_data_set |&gt; mutate(Priority_Total = Priority_Physical + Priority_Ecological) # nolint:\n\n### 11. Write Data to Excel Sheet ###\n# Creates new .xlsx file for the master sheet in the current directory with the current date. # nolint:\n\nmaster_data_set_file_name &lt;- paste0(\"other/output/\",\"CombinedData_\", today, \".xlsx\")\nwb &lt;- createWorkbook()\naddWorksheet(wb, \"Data\")\nwriteData(wb, 1, (merged_data_set), startRow = 1, startCol = 1)\n\n# Save Master Set to Excel File in current directory\nsaveWorkbook(wb, file = master_data_set_file_name, overwrite = TRUE)",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Methods</span>"
    ]
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "2  Results",
    "section": "",
    "text": "2.1 Quadrant ranking\nWe plotted each site by it’s physical and ecological scores on XY axes Figure 2.1\nShow the code\n# Export and prep\n\n# read in merged data set\ntoday &lt;- format(Sys.Date(), \"%m%d%Y\") # MMDDYYYY format\nmaster_data_set_file_name &lt;- paste0(\"other/output/\",\"CombinedData_\", today, \".xlsx\")\nmerged_data_set &lt;- read_excel(master_data_set_file_name)\n\n# Prep master data sheet with coordinates hyperlinked to Google Maps\nmerged_data_set &lt;- merged_data_set |&gt;\n  mutate(location_hyperlink = paste0(\"https://www.google.com/maps/search/?api=1&query= \",Longitude,Latitude))\n\n\n# Create the plot\n#p &lt;- ggplot(merged_data_set, aes(x = Priority_Ecological, y = Priority_Physical,\n#                                 text = paste(\"Location:\",Latitude,Longitude,\"\\n\",\n#                                             \"Stream:\",`Stream Name`,\"\\n\",\n#                                              \"Google Maps\", location_hyperlink))) +\n#  geom_jitter(color = \"blue\", size = 2, width = .4, height = 0.4) +\n#  labs(x = \"Ecological Condition\", y = \"Physical Condition\") +\n#  theme_minimal() +\n\n\n  # Add the priority zones (adjust colors and labels as needed)\n  #geom_rect(xmin = 0, xmax = 10, ymin = 0, ymax = 5, fill = \"pink\", alpha = 0.3) +\n  #geom_rect(xmin = 10, xmax = 20, ymin = 0, ymax = 5, fill = \"#199e19\", alpha = 0.2) +\n  #geom_rect(xmin = 0, xmax = 10, ymin = 5, ymax = 10, fill = \"lightblue\", alpha = 0.2) +\n  #geom_rect(xmin = 10, xmax = 20, ymin = 5, ymax = 10, fill = \"yellow\", alpha = 0.2) + \n  \n  # Add priority labels\n#  annotate(\"text\", x = 5, y = 2.5, label = \"4 = Lowest Priority\", color = \"black\") +\n#  annotate(\"text\", x = 15, y = 2.5, label = \"2 = High-Middle Priority\", color = \"black\") +\n#  annotate(\"text\", x = 5, y = 7.5, label = \"3 = Low-Middle Priority\", color = \"black\") +\n#  annotate(\"text\", x = 15, y = 7.5, label = \"1 = Highest Priority\", color = \"black\") +\n\n  # Add axes labels\n#  geom_segment(aes(x = -.5, y = -.5, xend = 20, yend = -.5)) +\n#  geom_segment(aes(x = -.5, y = -.5, xend = -.5, yend = 12)) +\n#  geom_segment(aes(x = 10, y = -.5, xend = 10, yend = 12), linetype = 2) +\n#  geom_segment(aes(x = -.5, y = 6, xend = 20, yend = 6), linetype = 2)\n  \n\n# make plotly\n#ggplotly(p)\n\n\n# cleate plotly object\n\n\n# prep plotly graph object\np &lt;- plot_ly(merged_data_set, \n             x = ~jitter(Priority_Ecological), \n             y = ~jitter(Priority_Physical)) %&gt;%\n  layout(xaxis = list(zeroline = FALSE, title = \"Ecological Priority\"), \n         yaxis = list(zeroline = FALSE, title = \"Physical Priority\"),\n         # annotations\n         annotations = list(\n           list(x = 5, y = 2.5, text = \"4 = Lowest Priority\", color = \"black\", showarrow = FALSE),\n           list(x = 15, y = 2.5, text = \"2 = High-Middle Priority\", color = \"black\", showarrow = FALSE),\n           list(x = 5, y = 7.5, text = \"3 = Low-Middle Priority\", color = \"black\", showarrow = FALSE),\n           list(x = 15, y = 7.5, text = \"1 = Highest Priority\", color = \"black\", showarrow = FALSE)),\n         showlegend = FALSE) %&gt;%\n  # interactive points\n  add_markers(\n    text = paste(\"Location:\",merged_data_set$Latitude,merged_data_set$Longitude,\"\\n\",\n                 \"Stream:\",merged_data_set$`Stream Name`,\"\\n\",\n                 \"Click Point to Open Map in Web Browser\"),\n    customdata = paste0(\"https://www.google.com/maps/search/?api=1&query= \",\n                        merged_data_set$Latitude, \", \", merged_data_set$Longitude)) %&gt;%\n  # line segments\n  add_segments(x = -.5,  y = -.5, xend = 20, yend = -.5, line = list(color = \"black\", width = 2)) %&gt;%\n  add_segments(x = -.5,  y = -.5, xend = -.5, yend = 12, line = list(color = \"black\", width = 2)) %&gt;%\n  add_segments(x = 10,  y = -.5, xend = 10, yend = 12, line = list(color = \"black\", width = 1, dash = \"dash\")) %&gt;%\n  add_segments(x = -.5,  y = 6, xend = 20, yend = 6, line = list(color = \"black\", width = 1, dash = \"dash\"))\n\n\n# render plotly object with points hyperlinked \nonRender(\n  p, \"\n  function(el) {\n    el.on('plotly_click', function(d) {\n      var url = d.points[0].customdata;\n      window.open(url);\n    });\n  }\n\")\n\n\n\n\n\n\n\n\nFigure 2.1",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#online-project-map",
    "href": "results.html#online-project-map",
    "title": "2  Results",
    "section": "2.2 Online Project Map",
    "text": "2.2 Online Project Map\nThe project map may be accessed by following the link at ArcGIS Online1 or in the interactive figure below. Toggle layers on/off as needed.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#footnotes",
    "href": "results.html#footnotes",
    "title": "2  Results",
    "section": "",
    "text": "https://kwf.maps.arcgis.com/apps/mapviewer/index.html?webmap=c61b78fa1cd24726ab90b40308f932d6↩︎",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "summary.html",
    "href": "summary.html",
    "title": "3  Summary",
    "section": "",
    "text": "Our results constitute a published draft method that can annually integrate multiple, distinct data inventories of fish passage structures (e.g. culverts) and freshwater habitat within the Kenai Peninsula Borough, then apply that data to calculate a relative prioritization score.\nThe regional prioritization scores provide a useful and important perspective to help managers decide how and when restoration funds should be directed. However, before considering this exercise to be complete, several additional needs must be resolved, which are described below (as of 2024-12-30):",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Summary</span>"
    ]
  },
  {
    "objectID": "summary.html#footnotes",
    "href": "summary.html#footnotes",
    "title": "3  Summary",
    "section": "",
    "text": "https://app.paperpile.com/view/plain/?id=ba5fcffa-9dec-4171-8b81-68831d4e99f9↩︎\nhttps://www.kenaiwatershed.org/about-kwf/news-media/↩︎",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Summary</span>"
    ]
  }
]